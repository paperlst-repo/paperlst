@{
    Layout = "_ColumnsOne";

    //page class
    Html.AppendPageCssClassParts("html-home-page");

}

<div class="page home-page">
    <div class="page-body">
        @await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.HomePageTop })
        <div class="container">
            @await Component.InvokeAsync("TopicBlock", new { systemName = "HomePageText" })
            @*<div class="wow fadeInUp animated" style="animation-delay: 100ms;">
                    @await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.HomePageBeforeCategories })
                    @await Component.InvokeAsync("HomepageCategories")
                </div>*@
            @await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.HomePageBeforeProducts })
            <div class="featured-produt">

                <div class="product-grid home-page-product-grid">
                    <partial name="~/Themes/Flexo/Views/Banners/_Automatico_1.cshtml" />
                    <div class="title">
                        <strong>Recommended</strong>
                    </div>
                    <div class="item-grid divAnchoPagina">
                        @await Component.InvokeAsync("HomepageProducts", new { items = 15, page = 1, recommended = true })
                    </div>
                    <div class="title">
                        <strong>@T("HomePage.Products")</strong>
                    </div>
                    <div class="lastProducts">
                        @await Component.InvokeAsync("HomepageProducts", new { items = 20, page = 1, recommended = false })
                    </div>
                    <div id="loadingGif" style="width:100%; text-align: center; padding: 32px 0; display:none">
                        <img src="~/images/loading.gif" />
                    </div>
                </div>
            </div>

            @await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.HomePageBeforeBestSellers })
            @await Component.InvokeAsync("HomepageBestSellers")
            @await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.HomePageBeforeNews })
            @await Component.InvokeAsync("HomepageNews")
            @await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.HomePageBeforePoll })
            @await Component.InvokeAsync("HomepagePolls")
            @await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.HomePageBottom })
        </div>
    </div>
</div>
<script type="text/javascript">

    var page = 2;
    var noMoreItems = false;
    var loading = false;
    $(window).scroll(function () {

        if ($(window).scrollTop() + $(window).height() >= $(document).height() - 700 && !noMoreItems && !loading) {
            $("#loadingGif").show();
            loading = true;
            $.get("/Home/HomepageProducts?items=20&page=" + page, function (data) {
                if ($(data).length == 0)
                    noMoreItems = true;
                $("#loadingGif").hide();
                $(".lastProducts").append(data);
                loading = false;
            });
            page = page + 1;

        }
    });

    $(document).ready(function () {
        $('.divAnchoPagina .item-grid').slick({
            slidesToShow: 4,
            swipeToSlide: true,
            autoplay: true,
            autoplaySpeed: 4500,
            arrows: true,
            responsive: [
                {
                    breakpoint: 1024,
                    settings: {
                        slidesToShow: 3
                    }
                },
                {
                    breakpoint: 600,
                    settings: {
                        slidesToShow: 2
                    }
                },
                {
                    breakpoint: 480,
                    settings: {
                        slidesToShow: 1
                    }
                }
         
            ]
        });

        $("#brandslider").owlCarousel({
            autoPlay: 3000, //Set AutoPlay to 3 seconds
            items: 5,
            itemsDesktop: [1199, 3],
            itemsDesktopSmall: [979, 3],
            navigation: true,
            pagination: false,
        });
        $("#instragram-slider").owlCarousel({
            autoPlay: 3000, //Set AutoPlay to 3 seconds
            items: 5,
            itemsDesktop: [1199, 3],
            itemsDesktopSmall: [979, 3],
            navigation: true,
            pagination: false,
        });
    });

</script>
