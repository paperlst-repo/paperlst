@{
    Layout = "_ColumnsOne";

    //page class
    Html.AppendPageCssClassParts("html-home-page");
}
<div class="page home-page">
    <div class="page-body">
        @await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.HomePageTop })
        <div class="container">
            @await Component.InvokeAsync("TopicBlock", new { systemName = "HomePageText" })
            @*<div class="wow fadeInUp animated" style="animation-delay: 100ms;">
                    @await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.HomePageBeforeCategories })
                    @await Component.InvokeAsync("HomepageCategories")
                </div>*@
            @await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.HomePageBeforeProducts })
            <div class="featured-produt">
                <div class="banner-top-center">
                    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                    <!-- Automatico 1 -->
                    <ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-5293600236951833"
                         data-ad-slot="4343509234"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>
                    <script>
                        (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>

                <div class="product-grid home-page-product-grid">
                    <div class="title">
                        <strong>@T("HomePage.Products")</strong>
                    </div>
                    <div class="item-grid">
                        @await Component.InvokeAsync("HomepageProducts", new { items = 20, page = 1 })
                    </div>
                    <div id="loadingGif" style="width:100%; text-align: center; padding: 32px 0; display:none">
                        <img src="~/images/loading.gif" />
                    </div>
                </div>
            </div>

            @await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.HomePageBeforeBestSellers })
            @await Component.InvokeAsync("HomepageBestSellers")
            @await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.HomePageBeforeNews })
            @await Component.InvokeAsync("HomepageNews")
            @await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.HomePageBeforePoll })
            @await Component.InvokeAsync("HomepagePolls")
            @await Component.InvokeAsync("Widget", new { widgetZone = PublicWidgetZones.HomePageBottom })
        </div>
    </div>
</div>
<script type="text/javascript">

    var page = 2;
    var noMoreItems = false;
    var loading = false;
    $(window).scroll(function () {
   
        if ($(window).scrollTop() + $(window).height() >= $(document).height() - 700 && !noMoreItems && !loading) {
            $("#loadingGif").show();
            loading = true;
            $.get("/Home/HomepageProducts?items=20&page=" + page, function (data) {
                if ($(data).length == 0)
                    noMoreItems = true;
                $("#loadingGif").hide();
                $(".product-grid .item-grid").append(data);
                loading = false;
            });        
            page = page + 1;

        }
    });

    $(document).ready(function () {
        $("#brandslider").owlCarousel({
            autoPlay: 3000, //Set AutoPlay to 3 seconds
            items: 5,
            itemsDesktop: [1199, 3],
            itemsDesktopSmall: [979, 3],
            navigation: true,
            pagination: false,
        });
        $("#instragram-slider").owlCarousel({
            autoPlay: 3000, //Set AutoPlay to 3 seconds
            items: 5,
            itemsDesktop: [1199, 3],
            itemsDesktopSmall: [979, 3],
            navigation: true,
            pagination: false,
        });
    });

</script>
